# Requirements Document

## Introduction

Данная функция добавляет новый API эндпоинт для отслеживания и обновления прогресса пользователя в различных категориях обучения (туториалы, головоломки). Эндпоинт позволяет сохранять информацию о завершенных пользователем заданиях по типам и категориям.

## Requirements

### Requirement 1

**User Story:** Как система, я хочу принимать данные о прогрессе пользователя через POST API эндпоинт, чтобы сохранять информацию о завершенных заданиях.

#### Acceptance Criteria

1. WHEN система получает POST запрос на `/user/{userId}/progress` THEN система SHALL принять данные о прогрессе пользователя
2. WHEN в запросе передается валидный userId в формате UUID THEN система SHALL обработать запрос для указанного пользователя
3. WHEN в теле запроса передается объект с полями type, category, completed THEN система SHALL валидировать структуру данных
4. WHEN поле type содержит значение "tutorial" или другие валидные типы THEN система SHALL принять тип активности
5. WHEN поле category содержит значение "maze" или другие валидные категории THEN система SHALL принять категорию
6. WHEN поле completed содержит массив строк с идентификаторами завершенных заданий THEN система SHALL сохранить список завершенных заданий

### Requirement 2

**User Story:** Как разработчик, я хочу иметь валидацию входных данных эндпоинта, чтобы обеспечить корректность сохраняемой информации.

#### Acceptance Criteria

1. WHEN userId не является валидным UUID THEN система SHALL вернуть ошибку 400 Bad Request
2. WHEN тело запроса не содержит обязательные поля type, category, completed THEN система SHALL вернуть ошибку 400 Bad Request
3. WHEN поле completed не является массивом строк THEN система SHALL вернуть ошибку 400 Bad Request
4. WHEN все данные валидны THEN система SHALL вернуть статус 200 OK с подтверждением сохранения

### Requirement 3

**User Story:** Как система, я хочу сохранять прогресс пользователя в базе данных, чтобы информация была доступна для последующего использования.

#### Acceptance Criteria

1. WHEN данные прогресса валидны THEN система SHALL сохранить информацию в базе данных
2. WHEN для пользователя уже существует прогресс по данной категории THEN система SHALL обновить существующую запись
3. WHEN для пользователя не существует прогресс по данной категории THEN система SHALL создать новую запись
4. WHEN операция сохранения завершена успешно THEN система SHALL вернуть подтверждение с сохраненными данными

### Requirement 4

**User Story:** Как система, я хочу обрабатывать ошибки при работе с эндпоинтом, чтобы предоставлять понятную обратную связь клиентам.

#### Acceptance Criteria

1. WHEN происходит ошибка базы данных THEN система SHALL вернуть статус 500 Internal Server Error
2. WHEN пользователь не найден THEN система SHALL вернуть статус 404 Not Found
3. WHEN запрос содержит некорректные данные THEN система SHALL вернуть статус 400 Bad Request с описанием ошибки
4. WHEN все операции выполнены успешно THEN система SHALL вернуть статус 200 OK с данными ответа
